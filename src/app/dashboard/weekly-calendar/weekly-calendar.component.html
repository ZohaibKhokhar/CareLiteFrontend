<div class="calendar-container">
  <h2>Weekly Calendar</h2>

  <!-- Controls -->
  <form [formGroup]="form" class="calendar-controls">
    <label for="provider">Provider:</label>
    <select id="provider" formControlName="providerId">
      <option [ngValue]="null">-- Select Provider --</option>
      @for (p of providers$ | async; track p.providerId) {
        <option [ngValue]="p.providerId">
          {{ p.firstName }} {{ p.lastName }}
        </option>
      }
    </select>

    <label for="weekStart">Week Starting:</label>
    <input type="date" id="weekStart" formControlName="weekStart" />

    <button type="button" (click)="loadWeek()">Load Week</button>
    <button type="button" (click)="prevWeek()">Previous</button>
    <button type="button" (click)="nextWeek()">Next</button>
  </form>

<mwl-calendar-week-view
  [viewDate]="viewDate"
  [events]="calendarEvents"
  [hourSegments]="4"
  [hourSegmentHeight]="50"
  [dayStartHour]="9"
  [dayEndHour]="18"
  [eventTitleTemplate]="eventTitleTemplate">
</mwl-calendar-week-view>

<ng-template #eventTitleTemplate let-event="event">
  <div>
    <strong>Visit #{{ event.meta?.visitId }}</strong><br />
    Provider: {{ event.meta?.providerId }}<br />
    Created: {{ event.meta?.createdAt | date: 'short' }}<br />
    Duration: {{ event.meta?.durationMinutes }}m<br />
    Completed: {{ event.meta?.isCompleted ? 'Yes' : 'No' }}
  </div>
</ng-template>


</div>
