<div class="patient-container">
  <div class="header-section">
    <h2>Patients List</h2>

    <input type="text" placeholder="Search patients..." (input)="onSearchChange($event)" />

   
    <button class="add-btn" (click)="navigateToAddPatient()">+ Add Patient</button>
  </div>

  <div class="filter-section">
  
    <label for="pageSize">Page Size:</label>
    <select id="pageSize" (change)="onPageSizeChange($event)">
      <option [value]="5">5</option>
      <option [value]="10" selected>10</option>
      <option [value]="25">25</option>
      <option [value]="50">50</option>
    </select>

   
    <label for="sortBy">Sort By:</label>
    <select id="sortBy" (change)="onSortChange($event)">
      <option value="PatientName" selected>Patient Name</option>
      <option value="CreatedAt">Created At</option>
    </select>

 
    <label for="sortOrder">Order:</label>
    <select id="sortOrder" (change)="onSortOrderChange($event)">
      <option value="asc" selected>Ascending</option>
      <option value="desc">Descending</option>
    </select>
  </div>

  @if (isLoading$ | async) {
    <p class="loading-text">Loading patients...</p>
  }

  @if (errorMessage$ | async; as error) {
    <p class="error-text">{{ error }}</p>
  }

  @if (!(isLoading$ | async) && (((patients$ | async)?.length ?? 0) > 0)) {
    <div class="patient-list">
      @for (patient of (patients$ | async); track patient.patientID) {
        <div class="patient-card">
          <h3>{{ patient.patientName }}</h3>
          <p><strong>Name:</strong> {{ patient.patientName }}</p>
          <p><strong>Email:</strong> {{ patient.email }}</p>
          <p><strong>Address:</strong> {{ patient.patientAddress }}</p>

          <div class="actions">
            <button class="delete-btn" (click)="deletePatient(patient.patientID)">Delete</button>
            <button class="update-btn" (click)="updatePatient(patient.patientID)">Update</button>
          </div>
        </div>
      }
    </div>

    <div class="pagination-controls">
      @if (totalCount$ | async; as totalCount) {
        <button (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
        <span>Page {{ currentPage }} of {{ Math.ceil(totalCount / pageSize) }}</span>
        <button (click)="nextPage(totalCount)" [disabled]="currentPage >= Math.ceil(totalCount / pageSize)">Next</button>
      }
    </div>
  }

  @if (!(isLoading$ | async) && (((patients$ | async)?.length ?? 0) === 0)) {
    <p class="empty-text">No patients found.</p>
  }
</div>
